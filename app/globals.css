@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 240 10% 3.9%;
    --card: 0 0% 100%;
    --card-foreground: 240 10% 3.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 240 10% 3.9%;
    --primary: 346.8 77.2% 49.8%;
    --primary-foreground: 355.7 100% 97.3%;
    --secondary: 240 4.8% 95.9%;
    --secondary-foreground: 240 5.9% 10%;
    --muted: 240 4.8% 95.9%;
    --muted-foreground: 240 3.8% 46.1%;
    --accent: 240 4.8% 95.9%;
    --accent-foreground: 240 5.9% 10%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 0 0% 98%;
    --border: 240 5.9% 90%;
    --input: 240 5.9% 90%;
    --ring: 346.8 77.2% 49.8%;
    --radius: 0.5rem;
    --font-libre-baskerville: 'Libre Baskerville', serif;
  }

  .dark {
    --background: 20 14.3% 4.1%;
    --foreground: 0 0% 95%;
    --card: 24 9.8% 10%;
    --card-foreground: 0 0% 95%;
    --popover: 0 0% 9%;
    --popover-foreground: 0 0% 95%;
    --primary: 346.8 77.2% 49.8%;
    --primary-foreground: 355.7 100% 97.3%;
    --secondary: 240 3.7% 15.9%;
    --secondary-foreground: 0 0% 98%;
    --muted: 0 0% 15%;
    --muted-foreground: 240 5% 64.9%;
    --accent: 12 6.5% 15.1%;
    --accent-foreground: 0 0% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 85.7% 97.3%;
    --border: 240 3.7% 15.9%;
    --input: 240 3.7% 15.9%;
    --ring: 346.8 77.2% 49.8%;
  }

  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
    font-feature-settings: "rlig" 1, "calt" 1;
  }

  html {
    font-family: var(--font-libre-baskerville);
  }
}

@layer components {
  /* Custom rounded corners for cards and buttons */
  .rounded-card {
    @apply rounded-xl;
  }
  
  /* Custom shadows */
  .shadow-custom {
    @apply shadow-lg shadow-primary/5;
  }
  
  /* Custom button styles */
  .btn-primary {
    @apply bg-accent text-white rounded-full px-6 py-3 font-medium transition-all hover:bg-accent/90;
  }
  
  .btn-secondary {
    @apply bg-secondary text-primary rounded-full px-6 py-3 font-medium transition-all hover:bg-secondary/90;
  }
  
  /* Custom input styles */
  .input-custom {
    @apply rounded-lg border-2 border-border bg-transparent px-4 py-2 focus:border-accent focus:ring-2 focus:ring-accent/20 outline-none;
  }
}

.markdown-body {
  @apply prose dark:prose-invert max-w-none;
  @apply prose-pre:bg-muted prose-pre:border prose-pre:border-muted;
  @apply prose-code:text-primary prose-code:bg-muted/50 prose-code:rounded prose-code:px-1;
  @apply prose-a:text-primary prose-a:no-underline hover:prose-a:underline;
  @apply prose-headings:scroll-mt-28;
  @apply prose-p:my-2 prose-p:leading-relaxed;
  @apply prose-ul:my-2 prose-ol:my-2;
  @apply prose-li:my-0;
  @apply prose-blockquote:my-2;
}

/* Adjust spacing for the last element to remove extra margin */
.markdown-body > *:last-child {
  @apply mb-0;
}

/* Ensure proper contrast in dark mode */
.dark .markdown-body {
  @apply prose-pre:bg-muted/50 prose-code:bg-muted/50;
  @apply prose-a:text-accent hover:prose-a:text-accent/90;
}

/* Style adjustments for code blocks */
.markdown-body pre {
  @apply bg-muted/50 p-4 rounded-lg overflow-auto my-2;
}

.markdown-body code {
  @apply bg-muted/50 px-1.5 py-0.5 rounded text-sm font-medium;
}

/* Inline code should be slightly smaller */
.markdown-body :not(pre) > code {
  @apply text-[0.9em];
}

/* List styling */
.markdown-body ul {
  @apply list-disc pl-6 my-2;
}

.markdown-body ol {
  @apply list-decimal pl-6 my-2;
}

/* Blockquote styling */
.markdown-body blockquote {
  @apply border-l-4 border-muted pl-4 italic my-2;
}

/* Table styling */
.markdown-body table {
  @apply w-full border-collapse my-2;
}

.markdown-body th,
.markdown-body td {
  @apply border border-muted p-2;
}

/* Image styling */
.markdown-body img {
  @apply max-w-full h-auto rounded-lg my-2;
}

/* Heading styles */
.markdown-body h1 {
  @apply text-2xl font-bold mt-6 mb-4;
}

.markdown-body h2 {
  @apply text-xl font-bold mt-5 mb-3;
}

.markdown-body h3 {
  @apply text-lg font-bold mt-4 mb-2;
}

.markdown-body h4,
.markdown-body h5,
.markdown-body h6 {
  @apply text-base font-bold mt-3 mb-2;
}

/* Math equation styling */
.markdown-body .math {
  @apply overflow-x-auto py-2;
}

.markdown-body .math-inline {
  @apply inline-block align-middle;
}

/* Syntax highlighting theme adjustments */
.markdown-body .token.comment,
.markdown-body .token.prolog,
.markdown-body .token.doctype,
.markdown-body .token.cdata {
  @apply text-muted-foreground;
}

.markdown-body .token.function,
.markdown-body .token.keyword {
  @apply text-accent;
}

.markdown-body .token.string,
.markdown-body .token.attr-value {
  @apply text-green-500 dark:text-green-400;
}

.markdown-body .token.number,
.markdown-body .token.boolean {
  @apply text-orange-500 dark:text-orange-400;
}

.markdown-body .token.operator,
.markdown-body .token.entity,
.markdown-body .token.url {
  @apply text-primary;
}

/* Loading state styling */
@keyframes markdown-skeleton-loading {
  0% {
    background-position: 200% 0;
  }
  100% {
    background-position: -200% 0;
  }
}

.markdown-body.loading {
  @apply opacity-70;
}

.markdown-body.loading * {
  @apply animate-pulse;
}

/* Custom prism light effects for landing page */
.prism-light {
  position: relative;
  overflow: hidden;
}

.prism-light::before {
  content: '';
  position: absolute;
  width: 200%;
  height: 200%;
  background: linear-gradient(
    115deg,
    rgba(255, 0, 0, 0.1),
    rgba(255, 165, 0, 0.1),
    rgba(255, 255, 0, 0.1),
    rgba(0, 128, 0, 0.1),
    rgba(0, 0, 255, 0.1),
    rgba(75, 0, 130, 0.1),
    rgba(238, 130, 238, 0.1)
  );
  animation: prism-animate 8s linear infinite;
  opacity: 0.5;
  pointer-events: none;
}

.rainbow-text {
  background-image: linear-gradient(
    to right,
    #ff8a00,
    #e52e71,
    #b36efd,
    #6428fd,
    #00dabd
  );
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  background-size: 300% 100%;
  animation: rainbow-text-animation 6s ease infinite;
}

@keyframes rainbow-text-animation {
  0% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
  100% {
    background-position: 0% 50%;
  }
}

@keyframes prism-animate {
  0% {
    transform: translateX(-50%) translateY(-50%) rotate(0deg);
  }
  100% {
    transform: translateX(-50%) translateY(-50%) rotate(360deg);
  }
}

/* Prism light beam effect */
.prism-beam {
  position: relative;
  overflow: hidden;
}

.prism-beam::after {
  content: '';
  position: absolute;
  top: 50%;
  left: -100%;
  width: 300%;
  height: 10px;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255, 255, 255, 0.2),
    rgba(255, 255, 255, 0.6),
    rgba(255, 255, 255, 0.2),
    transparent
  );
  transform: translateY(-50%) rotate(25deg);
  animation: beam-animation 8s infinite linear;
}

@keyframes beam-animation {
  0% {
    transform: translateY(-50%) rotate(25deg) translateX(-30%);
    opacity: 0;
  }
  20% {
    opacity: 0.8;
  }
  80% {
    opacity: 0.8;
  }
  100% {
    transform: translateY(-50%) rotate(25deg) translateX(100%);
    opacity: 0;
  }
}

@layer utilities {
  .font-libre {
    font-family: var(--font-libre-baskerville);
  }

  .font-libre-regular {
    font-family: var(--font-libre-baskerville);
    font-weight: 400;
    font-style: normal;
  }

  .font-libre-bold {
    font-family: var(--font-libre-baskerville);
    font-weight: 700;
    font-style: normal;
  }

  .font-libre-italic {
    font-family: var(--font-libre-baskerville);
    font-weight: 400;
    font-style: italic;
  }
}
