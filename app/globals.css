@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --radius: 0.625rem;
    --background: #ffffff;
    --foreground: #2f204a;
    --card: #ffffff;
    --card-foreground: #2f204a;
    --popover: #ffffff;
    --popover-foreground: #2f204a;
    --primary: #2f204a;
    --primary-foreground: #ffffff;
    --secondary: #fcf7b3;
    --secondary-foreground: #2f204a;
    --muted: #f4f4f5;
    --muted-foreground: #71717a;
    --accent: #ff6efa;
    --accent-foreground: #2f204a;
    --destructive: #ef4444;
    --destructive-foreground: #ffffff;
    --border: #e4e4e7;
    --input: #e4e4e7;
    --ring: #ff6efa;
  }

  .dark {
    --background: #2f204a;
    --foreground: #ffffff;
    --card: #3a2a5a;
    --card-foreground: #ffffff;
    --popover: #3a2a5a;
    --popover-foreground: #ffffff;
    --primary: #ffffff;
    --primary-foreground: #2f204a;
    --secondary: #3a2a5a;
    --secondary-foreground: #ffffff;
    --muted: #3a2a5a;
    --muted-foreground: #a1a1aa;
    --accent: #ff6efa;
    --accent-foreground: #ffffff;
    --destructive: #ef4444;
    --destructive-foreground: #ffffff;
    --border: rgba(255, 255, 255, 0.1);
    --input: rgba(255, 255, 255, 0.15);
    --ring: #ff6efa;
  }

  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
    font-feature-settings: "rlig" 1, "calt" 1;
  }
}

@layer components {
  /* Custom rounded corners for cards and buttons */
  .rounded-card {
    @apply rounded-xl;
  }
  
  /* Custom shadows */
  .shadow-custom {
    @apply shadow-lg shadow-primary/5;
  }
  
  /* Custom button styles */
  .btn-primary {
    @apply bg-accent text-white rounded-full px-6 py-3 font-medium transition-all hover:bg-accent/90;
  }
  
  .btn-secondary {
    @apply bg-secondary text-primary rounded-full px-6 py-3 font-medium transition-all hover:bg-secondary/90;
  }
  
  /* Custom input styles */
  .input-custom {
    @apply rounded-lg border-2 border-border bg-transparent px-4 py-2 focus:border-accent focus:ring-2 focus:ring-accent/20 outline-none;
  }
}

.markdown-body {
  @apply prose dark:prose-invert max-w-none;
  @apply prose-pre:bg-muted prose-pre:border prose-pre:border-muted;
  @apply prose-code:text-primary prose-code:bg-muted/50 prose-code:rounded prose-code:px-1;
  @apply prose-a:text-primary prose-a:no-underline hover:prose-a:underline;
  @apply prose-headings:scroll-mt-28;
  @apply prose-p:my-2 prose-p:leading-relaxed;
  @apply prose-ul:my-2 prose-ol:my-2;
  @apply prose-li:my-0;
  @apply prose-blockquote:my-2;
}

/* Adjust spacing for the last element to remove extra margin */
.markdown-body > *:last-child {
  @apply mb-0;
}

/* Ensure proper contrast in dark mode */
.dark .markdown-body {
  @apply prose-pre:bg-muted/50 prose-code:bg-muted/50;
  @apply prose-a:text-accent hover:prose-a:text-accent/90;
}

/* Style adjustments for code blocks */
.markdown-body pre {
  @apply bg-muted/50 p-4 rounded-lg overflow-auto my-2;
}

.markdown-body code {
  @apply bg-muted/50 px-1.5 py-0.5 rounded text-sm font-medium;
}

/* Inline code should be slightly smaller */
.markdown-body :not(pre) > code {
  @apply text-[0.9em];
}

/* List styling */
.markdown-body ul {
  @apply list-disc pl-6 my-2;
}

.markdown-body ol {
  @apply list-decimal pl-6 my-2;
}

/* Blockquote styling */
.markdown-body blockquote {
  @apply border-l-4 border-muted pl-4 italic my-2;
}

/* Table styling */
.markdown-body table {
  @apply w-full border-collapse my-2;
}

.markdown-body th,
.markdown-body td {
  @apply border border-muted p-2;
}

/* Image styling */
.markdown-body img {
  @apply max-w-full h-auto rounded-lg my-2;
}

/* Heading styles */
.markdown-body h1 {
  @apply text-2xl font-bold mt-6 mb-4;
}

.markdown-body h2 {
  @apply text-xl font-bold mt-5 mb-3;
}

.markdown-body h3 {
  @apply text-lg font-bold mt-4 mb-2;
}

.markdown-body h4,
.markdown-body h5,
.markdown-body h6 {
  @apply text-base font-bold mt-3 mb-2;
}

/* Math equation styling */
.markdown-body .math {
  @apply overflow-x-auto py-2;
}

.markdown-body .math-inline {
  @apply inline-block align-middle;
}

/* Syntax highlighting theme adjustments */
.markdown-body .token.comment,
.markdown-body .token.prolog,
.markdown-body .token.doctype,
.markdown-body .token.cdata {
  @apply text-muted-foreground;
}

.markdown-body .token.function,
.markdown-body .token.keyword {
  @apply text-accent;
}

.markdown-body .token.string,
.markdown-body .token.attr-value {
  @apply text-green-500 dark:text-green-400;
}

.markdown-body .token.number,
.markdown-body .token.boolean {
  @apply text-orange-500 dark:text-orange-400;
}

.markdown-body .token.operator,
.markdown-body .token.entity,
.markdown-body .token.url {
  @apply text-primary;
}

/* Loading state styling */
@keyframes markdown-skeleton-loading {
  0% {
    background-position: 200% 0;
  }
  100% {
    background-position: -200% 0;
  }
}

.markdown-body.loading {
  @apply opacity-70;
}

.markdown-body.loading * {
  @apply animate-pulse;
}
